
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Web & iOS dev – Ruby, Rails, RubyMotion & React</title>
  <meta name="author" content="Paul Sturgess">

  
  <meta name="description" content="React has many lifecycle methods you can hook behaviour onto, one of which is componentDidUpdate. This blog will show you how to test this method &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://paulsturgess.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Web & iOS dev – Ruby, Rails, RubyMotion & React" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-75197-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Web & iOS dev – Ruby, Rails, RubyMotion & React</a></h1>
  
    <h2>Paul Sturgess</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Index</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="https://twitter.com/paulsturgess">@paulsturgess</a></li>
  <li><a href="https://github.com/paulsturgess">Github</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/04/how-to-test-react-lifecycle-method-componentdidupdate-when-the-component-props-change/">How to Test React Lifecycle Method componentDidUpdate When the Component Props Change</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-05-04T22:12:00+01:00" pubdate data-updated="true">May 4<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://facebook.github.io/react/">React</a> has many lifecycle methods you can hook behaviour onto, one of which is <code>componentDidUpdate</code>.</p>

<p>This blog will show you how to test this method using <a href="https://www.npmjs.com/package/react-dom">react-dom</a>.</p>

<p>Let&#8217;s say your component implements <code>componentDidUpdate</code> like this:</p>

<div class="highlight"><pre><code class="javascript"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">YourComponent</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">componentDidUpdate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">someFunction</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">someFunction</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>Now say you want to test that <code>componentDidUpdate</code> calls <code>this.someFunction()</code>.</p>

<p>Because the props for the component are set on initial render, and cannot change after that, you can&#8217;t just render an instance of the component and manually update the props in your spec.</p>

<p>This is where <a href="https://www.npmjs.com/package/react-dom">react-dom</a> comes in. Use it to render the component with an initial set of props and then render the component again with different props.</p>

<p>react-dom will re-render the same instance of the component, instead of creating a brand new one each time.</p>

<div class="highlight"><pre><code class="javascript"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">YourComponent</span> <span class="nx">from</span> <span class="s1">&#39;path/to/your-component&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;your-component&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;componentDidUpdate&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;calls someFunction()&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">node</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
      <span class="nx">instance</span> <span class="o">=</span> <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">YourComponent</span> <span class="nx">yourProp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nx">node</span><span class="p">);</span>
      <span class="nx">spyOn</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="s1">&#39;someFunction&#39;</span><span class="p">);</span>
      <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">YourComponent</span> <span class="nx">yourProp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nx">node</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">someFunction</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/09/rubymotion-inspect-paris-was-loads-of-fun/">RubyMotion #inspect Paris Was Loads of Fun</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-09T09:52:00+01:00" pubdate data-updated="true">Jul 9<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week was the <a href="http://conference.rubymotion.com/">RubyMotion #inspect 2015</a> conference
in Paris and not only was I lucky enough to attend, but I was also invited to speak about
the RubyMotion football manager game I built: <a href="http://www.titlchallenge.com">Title Challenge</a>.</p>

<p><a href="/images/rubymotion_paris.JPG" target="_blank"><img class="center" src="/images/rubymotion_paris.JPG" width="500" height="500" title="Paul at RubyMotion Paris" alt="Paul at RubyMotion Paris"></a></p>

<p>RubyMotion #inspect is a two-day conference and my talk was scheduled for the second day,
which is lucky for me as I missed day one due to protestors spontaneously deciding to
prevent the Eurostar from running the day I was due to travel. Fortunately the talks
were recorded, so hopefully these will be made available soon!</p>

<h2>RubyMotion 4</h2>

<p><a href="https://twitter.com/lrz">Laurent Sansonetti</a> announced what is planned for RubyMotion 4 and it sounds awesome:</p>

<ul>
<li>A new REPL to work on the device</li>
<li>Cross-platform game framework</li>
<li>WatchKit</li>
<li>iOS 9 support</li>
<li>More work on live code reloading</li>
</ul>


<h2>Inspiration</h2>

<p>It was great meeting the RubyMotion community and it definitely feels like an
extension of all of the good things from the Ruby and Ruby On Rails communities.
Lots of enthusiasm, smart and friendly people doing some really cool things.</p>

<p>For me conferences are all about being inspired and the two talks that stood out
were from <a href="https://twitter.com/amirrajan">Amir Rajan</a> and <a href="https://twitter.com/markrickert">Mark Rickert</a>.</p>

<p>Amir is the genius behind the game A Dark Room which reached #1 in the US App Store.
I thoroughly recommend <a href="http://amirrajan.net/a-dark-room/">reading his blog</a> which
tells the story as he lived it.</p>

<p>Mark told us about his experience quitting his full-time job, selling pretty much
everything he owned and living on the road. He now consults on RubyMotion projects
remotely, works half as much, makes more money and most importantly is far more happy!</p>

<p>If you get the chance to hear either of these guys speak then make sure you do.</p>

<h2>Life begins at the end of your comfort zone</h2>

<p>For my talk I discussed the major challenges that were faced in building the game.
Highlighting, where I could, lessons learned and things I would have done differently
having now gone through the experience.</p>

<p>What I had to say seemed to go down well. The team working on RedPotion have already
<a href="https://github.com/clearsightstudio/ProMotion/issues/712">made changes to the framework</a>
inspired by some simple ideas I had for debugging memory issues.</p>

<p>If there&#8217;s one point to take-away from my talk though it&#8217;s &#8220;Life begins at the end of your comfort zone&#8221;.
If you have an idea, just go for it and don&#8217;t be afraid to figure out things as
you go along!</p>

<p>Feel free to take a look at <a href="/downloads/rubymotion_inspect_2015_paul_sturgess.pdf">the slides for my presentation</a>.</p>

<p>If you have questions get in touch on twitter: <a href="https://twitter.com/paulsturgess">@paulsturgess</a>.</p>

<h2>WXG Conference – 25th Sept, Guildford, UK</h2>

<p>I will also be talking about Title Challenge at the <a href="http://wxg.co.uk/">WXG Conference</a>.</p>

<p>It&#8217;s a one day conference about web &amp; digital experiences.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/12/core-data-in-rubymotion-defining-your-schema-in-code/">Core Data in RubyMotion – Defining Your Schema in Code</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-12T10:55:00+01:00" pubdate data-updated="true">May 12<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of the things I love about RubyMotion is being able to build applications without
having to heavily rely on XCode. I feel far more comfortable in a text editor, where I
can actually see the code that makes it work.</p>

<p>Typically Core Data schemas are defined in XCode, with text fields and drop down options
used to define the attributes, relationships etc.</p>

<p>Fortunately for RubyMotion developers the fantastic <a href="https://github.com/infinitered/ruby-xcdm">ruby-xcdm</a>
allows us to define our schema in code.</p>

<p>This may seem like more work, but one of benefits to defining the schema in code is
visibility. With the schema checked into version control, it&#8217;s easy to see how it has
evolved over time. Who made the changes, when they made those changes and hopefully
the commit message might even say why they made those changes.</p>

<p>The <a href="https://github.com/infinitered/ruby-xcdm/blob/master/README.md">ruby-xcdm Readme</a> does a great
job of explaining how to set it up. However, I would like to talk a bit about versioning.</p>

<p>If you&#8217;re coming from a Ruby on Rails background (as I was) then CoreData doesn&#8217;t really &#8216;do&#8217;
migrations like ActiveRecord does. I&#8217;d recommend reading up on the term &#8216;lightweight migration&#8217; in
the Apple docs. Essentially for simple things, like adding or removing attributes, it can do these
automatically and they can be performed using ruby-xcdm.</p>

<p>To make this work, all you need to do is copy your schema and create a new file.
Just make sure you increment the schema number and as long as you have&#8230;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:&quot;build:simulator&quot;</span> <span class="o">=&gt;</span> <span class="ss">:&quot;schema:build&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&#8230;in your Rakefile, then the schema will be built and CoreData will perform the migration.</p>

<p>Ruby-xcdm can handle typical relationship types like <code>has_many</code>, <code>has_one</code> and <code>belongs_to</code>. It also
can handle entities that inherit from a base entity - just lookup the <code>abstract: true</code> and <code>parent:</code> options.</p>

<h2>Shameless plug</h2>

<p>This article is part of a series of blog posts about how I built <a href="http://titlechallenge.com">Title Challenge</a> – A football manager game for iOS.</p>

<p>Others i&#8217;ve written include:</p>

<ul>
<li><a href="http://paulsturgess.co.uk/blog/2015/03/03/using-paintcode-to-dynamically-create-images-in-the-ios-football-manager-game-title-challenge/">Using PaintCode to Dynamically Create Images</a></li>
<li><a href="http://paulsturgess.co.uk/blog/2015/02/13/using-reveal-app-to-build-a-rubymotion-football-manager-game/">Debuging layout issues with RevealApp</a></li>
<li><a href="http://paulsturgess.co.uk/blog/2015/02/17/how-you-can-use-core-data-to-make-your-rubymotion-app-faster/">How to use Core Data to make your app faster</a>.</li>
<li><a href="http://paulsturgess.co.uk/blog/2015/02/05/tweeting-a-screenshot-in-rubymotion-with-uiactivityviewcontroller/">Tweeting a Screenshot with UIActivityViewController</a></li>
</ul>


<p>Please do check out <a href="http://itunes.apple.com/app/id959982756">Title Challenge on the App Store</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/03/using-paintcode-to-dynamically-create-images-in-the-ios-football-manager-game-title-challenge/">Using PaintCode to Dynamically Create Images in the iOS Football Manager Game Title Challenge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-03T15:26:00+00:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of the important and distinctive visual aspects of <a href="http://www.titlechallenge.com">Title Challenge</a> is for each football club to have their own shirt and colour theme. The home and away shirts are used on nearly all screens, with the front of the shirts representing a club and the rear of the shirts, with a number on the back, representing a player.</p>

<p>There are over 250 clubs in the database that ships with the game. Each club has 2 shirts and we need several different sizes for different screens. We also had to consider that club shirts will potentially change in both colour and style each season going forward. On top of this, we wanted to support different device resolutions including both retina and non-retina resolutions.</p>

<p>To create a fixed set of graphics of thousands of combinations in varying sizes, styles and colours would have been laborious to say the least and incredibly time consuming to maintain. It also would have enormously bloated the file size of our application.</p>

<h2>Shirt Styles</h2>

<p>We decided we wanted to be able to dynamically display, hide, colour and scale graphical components with code. This would allow us to display any club shirt on the fly.</p>

<p>The first phase was to decide on some core shirt styles that covered the majority of shirts worn by football clubs. We came up with 6: Plain, Stripes, Hoops, Sleeves, Quarters and Halves. We also have a goalkeeper shirt and a substitute bib used for players on the bench.</p>

<p><a href="/images/shirt_styles.png" target="_blank"><img class="left" src="/images/shirt_styles.png" width="825" height="825" title="Shirt Layers image" alt="Shirt Layers image"></a></p>

<p>The image above shows the different shirt styles in Title Challenge</p>

<h2>Vector Layers</h2>

<p>After deciding on the styles, Thom, our designer, produced a set of modular vector graphics that could be layered over each other to create any kit style required without duplicating any of the kit elements.</p>

<p>However, those vector graphics weren’t used directly in the game. The shirts you see are entirely generated from code. To achieve this, each individual shirt element was imported into a third party application called <a href="http://www.paintcodeapp.com/">PaintCode</a>.</p>

<p><a href="/images/shirt_layers.png" target="_blank"><img class="left" src="/images/shirt_layers.png" width="825" height="825" title="Shirt Layers image" alt="Shirt Layers image"></a></p>

<p>The image above shows the layers that make up a black and white striped shirt with a green substitute bib.</p>

<h2>PaintCode</h2>

<p><a href="http://www.paintcodeapp.com/">PaintCode</a> is genius, it automatically generates drawing code from vector graphics.</p>

<p>The code to generate a shirt is actually composed of the same graphical modular layers composed on top of one another, but instead of vector graphics, they’re CALayers composed of UIBezierPath line segments with different fills and strokes.</p>

<p>Even the shirt numbers have been generated using PaintCode. We could have used a font, and we did look for one, but we couldn’t quite find the right one. We wanted one loosely inspired by the <a href="http://goo.gl/nCCUqC">Mexico ‘86 world cup</a>, but with a modern feel.</p>

<p>In the end it was easier to implement all elements of the shirt using the same code-based method. This was particularly true when we were dealing with scaling and animations on the tactics screen.</p>

<p><a href="/images/paintcode.png" target="_blank"><img class="left" src="/images/paintcode.png" width="825" height="825" title="Paintcode screenshot" alt="Paintcode screenshot"></a></p>

<p>Screenshot of <a href="http://www.paintcodeapp.com/">Paintcode</a> with the code in the panel below the shirt vector graphic.</p>

<h2>Turn it off and on again</h2>

<p>To generate the front or rear of a shirt, we simply show/hide a different collar style. We also show/hide the player number as appropriate. The goalkeeper shirt is just a plain shirt with some extra sleeves added on. For bibs, we simply add the bib layer straight over the top.</p>

<p>Basically we just turn layers on and off and change the colours to produce the shirt combination we want. Taking this approach means that making tweaks are a joy to implement and not a chore to dread.</p>

<p>Another benefit is we were able to include the shirts as part of data editor in the game. So any shirt style can be created completely on the fly using a color picker.</p>

<p>We also changed the shirt style several times during the development of Title Challenge. I have no affiliation with <a href="http://www.paintcodeapp.com/">PaintCode</a>, but I&#8217;m so glad we used it!</p>

<h2>Shameless plug</h2>

<p>If you got this far and you&#8217;re still wondering what Title Challenge is or you found this post useful and just feel like supporting me – Please do check out <a href="http://itunes.apple.com/app/id959982756">Title Challenge on the App Store</a>.</p>

<p>I&#8217;ve also written some other posts about developing Title Challenge: <a href="http://paulsturgess.co.uk/blog/2015/02/13/using-reveal-app-to-build-a-rubymotion-football-manager-game/">Debuging layout issues with RevealApp</a> and <a href="http://paulsturgess.co.uk/blog/2015/02/17/how-you-can-use-core-data-to-make-your-rubymotion-app-faster/">How to use Core Data to make your app faster</a>.</p>

<p><a href="/images/tactics.png" target="_blank"><img class="left" src="/images/tactics.png" width="825" height="825" title="Tactics screenshot" alt="Tactics screenshot"></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/17/how-you-can-use-core-data-to-make-your-rubymotion-app-faster/">How You Can Use Core Data to Make Your RubyMotion App Faster</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-17T09:05:00+00:00" pubdate data-updated="true">Feb 17<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is my second post in a series explaining some of the technical decisions behind creating the <a href="http://www.titlechallenge.com">football management iPhone game Title Challenge</a>. The first post was a <a href="http://paulsturgess.co.uk/blog/2015/02/13/using-reveal-app-to-build-a-rubymotion-football-manager-game/">short one about using Reveal App</a> as a useful debugging tool for building layouts.</p>

<p>From the outside Title Challenge may appear pretty simple, but under the hood there is a lot more than you might realise going on. Before I talk about why I chose Core Data (or even what Core Data is), let me explain a little bit about the processing the game needs to perform.</p>

<h2>Lots of processing means loading screens</h2>

<p>Each ‘game week’ you progress, the following needs to be updated:</p>

<ul>
<li>Process player transfers (ensuring these are realistic to each club)</li>
<li>Simulate player training (players improve their skill gradually over time)</li>
<li>Update all injured players (each week they will be closer to full fitness)</li>
<li>Update exhausted players (players get exhausted if they are not rested enough)</li>
<li>Check player unhappiness (players can get unhappy at not being played enough)</li>
<li>Run scout reports (your scouts will report back on your shortlisted players)</li>
<li>Update the transfer list (again ensuring clubs are realistic in who they transfer list)</li>
</ul>


<p>The key thing is that there could be 6,000+ players to update, with thousands of other related records to update in the database. I wanted this to run as fast as possible to reduce waiting times between game weeks.</p>

<p>While this is going on we show a loading screen. We decided to spend time making these look nice by including colourful player illustrations by <a href="http://davewilldesign.com/#/lfc-postcard-series-1314/">Liverpool FC illustrator Dave Will</a>.</p>

<p>Combined with a random humourous/entertaining/interesting quote (of which there are hundreds in the game) it makes waiting as pleasant as possible. Here&#8217;s an example:</p>

<p><a href="/images/loading.PNG" target="_blank"><img class="left" src="/images/loading.PNG" width="825" height="825" title="Loading image" alt="Loading image"></a>
&nbsp;</p>

<h2>Measuring Performance with RubyMotion-Benchmark</h2>

<p>One way I made the code run faster was to run it, measure it, tweak it. Rinse and repeat. <a href="https://github.com/Watson1978/RubyMotion-Benchmark">Motion Benchmark</a> is a very, very simple gem but it is easy to use for this very task. It gives you precise control on what code is benchmarked, but this also makes it time consuming to identify what you should be benchmarking in the first place.</p>

<h2>Find the bottlenecks in your code</h2>

<p>This is where the Time Profiler in XCode’s Instruments tool is incredibly useful. It could be the subject of an entire blog post. In a nutshell it shows the exact time taken for each branch of code, even for each thread. It gives you a full stack trace to work so you can even see which line of code it is. This makes it easy to identify where the biggest bottlenecks are. I would always try and optimise those first to get some quick wins.</p>

<h2>Optimise your code without even making it run faster</h2>

<p>However, the main point of this blog post is to recommend thinking about how you can optimise your code without even making it run faster. This probably sounds like a an odd statement, but this is where Core Data comes in.</p>

<p>Many developers think <a href="http://en.wikipedia.org/wiki/Core_Data">Core Data</a> is just another way to persist data and is comparable to using <a href="http://www.sqlite.org/">SQLite</a>. Indeed, Core Data can use SQLite to persist data and I use Core Data with SQLite in Title Challenge. However, the fact Core Data can use SQLite is not important and you won’t be writing any SQL to use it. Core Data is primarily a framework for object life-cycle and object graph management.</p>

<p>Coming from a web development background it took me a while to get my head around this. I’ve seen (and written) my fair share of Rails apps tightly coupled to ActiveRecord and the database layer. Using Core Data forces you to understand that persistence is not the same thing as the object graph. So what is “object graph management”? The best way I can explain it, without loads of boring theory, is to tell you how I use it in Title Challenge.</p>

<h2>Core Data and the Managed Object Context</h2>

<p>I figured out the fastest way to perform the game week processing was to do it while the gamer was not even waiting for it to finish. I decided I wanted to perform the processing while the gamer was picking their team, analysing their squad, scouring the transfer list etc. I’m effectively doing all the processing for the next game week ahead of time.</p>

<p>Core Data allows me to do this because I can take a copy of all the objects in the “Object Graph” ie. all the Clubs, Players etc. (in what is known as a Managed Object Context) and manipulate them as necessary on a background thread. I can perform all the tasks I mentioned earlier (e.g. processing transfers), without any of the changes showing up in the user interface as as the gamer is navigating around the app.</p>

<p>In fact, none of these changes are persisted to disk until the gamer hits continue. This is one of the major differences of Core Data from how you use a database in a web app. With Core Data you make as many changes as you like and at some later date you tell it to save.</p>

<p>Core Data is smart enough to handle the merging of all the changes from the background thread in with the changes made by the gamer on the main thread. The beauty of this technique is it doesn’t really matter how fast/slow my processing code runs, if the gamer is not even aware its running in the background.</p>

<p>This approach has worked really well, especially on older devices where sometimes it doesn’t matter how much you optimise your code, it’s going to run slowly.</p>

<h2>Some Complications</h2>

<p>It becomes more complicated when the gamer interacts with players that have also changed in the context on the background thread. This is pretty rare in practice, but I’ve written code to handle any conflicts so it resolves them before continuing to the next game week.</p>

<p>The other thing to watch out for is high memory usage. I found as I was processing nearly every player and every club, each game week, these were all getting pulled into memory and not released. Core Data will hold onto objects unless you tell it let go. This is great for performance, but not so great when memory is at a premium. I highly recommend reading up on <code>refreshObject</code> in the Core Data docs. Call this method on objects when you’re finished with them to release them and control memory spikes.</p>

<h2>Shameless plug</h2>

<p>If you got this far and you&#8217;re still wondering what Title Challenge is or you found this post useful and just feel like supporting me – Please do check out <a href="http://itunes.apple.com/app/id959982756">Title Challenge on the App Store</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/13/using-reveal-app-to-build-a-rubymotion-football-manager-game/">Using Reveal App to Build a RubyMotion Football Manager Game</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-13T15:26:00+00:00" pubdate data-updated="true">Feb 13<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is the beginning of a series of blog posts I intend to write on how I&#8217;ve built <a href="http://titlechallenge.com">Title Challenge – Football Management</a>.</p>

<p>It&#8217;s an iOS game I&#8217;ve written in <a href="http://www.rubymotion.com/">RubyMotion</a>. I&#8217;m a Ruby on Rails web developer turned app developer. Before building this game, I had no prior knowledge of building mobile applications.</p>

<p>Hopefully this series of posts will inspire other Ruby developers out there to start building really cool mobile apps.</p>

<p><a href="http://revealapp.com/">Reveal App</a> was one of the first third-party tools I downloaded when I started building Title Challenge 18 months ago and I&#8217;ve used it nearly every day since. At first glance it might look like a bit of a gimmick to see your app in 3D but it is incredibly useful for debugging.</p>

<p><a href="/images/reveal_app.png" target="_blank"><img class="left" src="/images/reveal_app.png" width="825" height="825" title="Reveal App screenshot" alt="Reveal App screenshot"></a></p>

<p>I&#8217;ve used Reveal to show me when a <code>UIView</code> is tucked behind some other <code>UIView</code> that I couldn&#8217;t see in the Simulator. Sometimes a <code>UIVIew</code> might not have a height set or something stupid like that and Reveal would instantly show me.</p>

<p>You can rotate your app round to see it from angles you can&#8217;t see in the Simulator.</p>

<p>Another really useful feature is being able to tweak attributes live in the Reveal and the Simulator reflects your changes. For example, you can change the frame of a <code>UIView</code> and see it move in the simulator live.</p>

<p>I&#8217;ve got no affiliation with Reveal but I definitely recommend it for App developers.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/05/tweeting-a-screenshot-in-rubymotion-with-uiactivityviewcontroller/">Tweeting a Screenshot in RubyMotion With UIActivityViewController</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-05T18:47:00+00:00" pubdate data-updated="true">Feb 5<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The easiest way to allow users to share content from inside your app is to use <code>UIActivityViewController</code>.</p>

<p>Use it when you want to allow the user to:</p>

<ul>
<li>Send a Tweet</li>
<li>Share on Facebook</li>
<li>Save an image to photos</li>
<li>Send an SMS message / iMessage</li>
<li>Send an email</li>
</ul>


<p>In iOS 8 it slides up a panel at the bottom of the screen. The user chooses
how they want to share the content. The options are based on the applications
they have installed. You can also specify which ones to include/exclude.</p>

<p>Here&#8217;s enough code to create an app with a button that brings up the <code>UIActivityViewController</code>,
takes a screenshot and allows the user to share it along with some text.</p>

<p>Hopefully the code and my comments are self-documenting enough to make sense.</p>

<p>I figured this out through a combination of the Apple docs and this <a href="http://nshipster.com/uiactivityviewcontroller/">NSHipster article</a>.</p>

<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">AppDelegate</span>

  <span class="kp">attr_reader</span> <span class="ss">:window</span>

  <span class="k">def</span> <span class="nf">application</span><span class="p">(</span><span class="n">application</span><span class="p">,</span> <span class="ss">didFinishLaunchingWithOptions</span><span class="p">:</span><span class="n">launchOptions</span><span class="p">)</span>
    <span class="n">rootViewController</span> <span class="o">=</span> <span class="no">MyController</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">init</span>
    <span class="n">rootViewController</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;ActivityViewController Demo&#39;</span>
    <span class="n">rootViewController</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">whiteColor</span>

    <span class="n">navigationController</span> <span class="o">=</span> <span class="no">UINavigationController</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithRootViewController</span><span class="p">(</span>
      <span class="n">rootViewController</span>
    <span class="p">)</span>

    <span class="vi">@window</span> <span class="o">=</span> <span class="no">UIWindow</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithFrame</span><span class="p">(</span><span class="no">UIScreen</span><span class="o">.</span><span class="n">mainScreen</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
    <span class="vi">@window</span><span class="o">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="n">navigationController</span>
    <span class="vi">@window</span><span class="o">.</span><span class="n">makeKeyAndVisible</span>

    <span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># This subclass is not technically required</span>
<span class="c1"># It allows you to switch the text based on the type of service it will be shared on</span>
<span class="k">class</span> <span class="nc">ShareText</span> <span class="o">&lt;</span> <span class="no">UIActivityItemProvider</span>

  <span class="kp">attr_accessor</span> <span class="ss">:text</span>

  <span class="c1"># The placeholder text</span>
  <span class="k">def</span> <span class="nf">activityViewControllerPlaceholderItem</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>
    <span class="s2">&quot;&quot;</span>
  <span class="k">end</span>

  <span class="c1"># The text that will be inserted into the Tweet / Email / SMS etc.</span>
  <span class="c1"># You could easily respond to more activity types if you wanted</span>
  <span class="k">def</span> <span class="nf">activityViewController</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="ss">itemForActivityType</span><span class="p">:</span> <span class="n">activityType</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">activityType</span> <span class="o">==</span> <span class="no">UIActivityTypePostToTwitter</span>
      <span class="s2">&quot;</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">twitter_handle</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">hashtag</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span>
      <span class="s2">&quot;</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">website</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">hashtag</span>
    <span class="s2">&quot;#yourhashtag&quot;</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">website</span>
    <span class="s2">&quot;http://yourwebsite.com&quot;</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">twitter_handle</span>
    <span class="s2">&quot;@YourTwitterHandle&quot;</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="c1"># This is a simple controller with one button</span>
<span class="k">class</span> <span class="nc">MyController</span> <span class="o">&lt;</span> <span class="no">UIViewController</span>

  <span class="k">def</span> <span class="nf">viewDidLoad</span>
    <span class="n">button</span> <span class="o">=</span> <span class="no">UIButton</span><span class="o">.</span><span class="n">buttonWithType</span><span class="p">(</span><span class="no">UIButtonTypeRoundedRect</span><span class="p">)</span>
    <span class="n">button</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Start&#39;</span><span class="p">,</span> <span class="ss">forState</span><span class="p">:</span><span class="no">UIControlStateNormal</span><span class="p">)</span>
    <span class="n">button</span><span class="o">.</span><span class="n">addTarget</span><span class="p">(</span>
      <span class="nb">self</span><span class="p">,</span>
      <span class="ss">action</span><span class="p">:</span> <span class="s1">&#39;button_tapped&#39;</span><span class="p">,</span>
      <span class="ss">forControlEvents</span><span class="p">:</span> <span class="no">UIControlEventTouchUpInside</span>
    <span class="p">)</span>
    <span class="n">button</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="o">[[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">260</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">40</span><span class="o">]]</span>
    <span class="n">view</span><span class="o">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="c1"># This method generates the image of the entire screen</span>
  <span class="c1"># Note it will not include the status bar</span>
  <span class="k">def</span> <span class="nf">screenshot</span>
    <span class="n">window</span> <span class="o">=</span> <span class="no">UIApplication</span><span class="o">.</span><span class="n">sharedApplication</span><span class="o">.</span><span class="n">keyWindow</span>
    <span class="no">UIGraphicsBeginImageContextWithOptions</span><span class="p">(</span>
      <span class="n">window</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
      <span class="kp">false</span><span class="p">,</span>
      <span class="no">UIScreen</span><span class="o">.</span><span class="n">mainScreen</span><span class="o">.</span><span class="n">scale</span>
    <span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">drawViewHierarchyInRect</span><span class="p">(</span>
      <span class="n">window</span><span class="o">.</span><span class="n">bounds</span><span class="p">,</span>
      <span class="ss">afterScreenUpdates</span><span class="p">:</span><span class="kp">true</span>
    <span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="no">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">()</span>
    <span class="no">UIGraphicsEndImageContext</span><span class="p">()</span>
    <span class="n">image</span>
  <span class="k">end</span>

  <span class="c1"># We create an instance of our ShareText subclass</span>
  <span class="c1"># Pass it into the UIActivityViewController along with the screenshot</span>
  <span class="c1"># The UIActivityViewController handles everything else, all you have to do is present the controller.</span>
  <span class="k">def</span> <span class="nf">button_tapped</span>
    <span class="n">tc_share_text</span> <span class="o">=</span> <span class="no">ShareText</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">init</span>
    <span class="n">tc_share_text</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Check out this screengrab!&quot;</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="no">UIActivityViewController</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithActivityItems</span><span class="p">(</span>
      <span class="o">[</span><span class="n">tc_share_text</span><span class="p">,</span> <span class="n">screenshot</span><span class="o">]</span><span class="p">,</span>
      <span class="ss">applicationActivities</span><span class="p">:</span> <span class="kp">nil</span>
    <span class="p">)</span>

    <span class="n">controller</span><span class="o">.</span><span class="n">excludedActivityTypes</span> <span class="o">=</span> <span class="o">[</span>
      <span class="no">UIActivityTypePrint</span><span class="p">,</span>
      <span class="no">UIActivityTypeAssignToContact</span><span class="p">,</span>
      <span class="no">UIActivityTypeAddToReadingList</span><span class="p">,</span>
      <span class="no">UIActivityTypePostToFlickr</span><span class="p">,</span>
      <span class="no">UIActivityTypeAirDrop</span>
    <span class="o">]</span>

    <span class="nb">self</span><span class="o">.</span><span class="n">presentViewController</span><span class="p">(</span>
      <span class="n">controller</span><span class="p">,</span>
      <span class="ss">animated</span><span class="p">:</span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">completion</span><span class="p">:</span><span class="kp">nil</span>
    <span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/07/using-nsuserdefaults-in-rubymotion/">Using NSUserDefaults in RubyMotion</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-07T09:19:00+01:00" pubdate data-updated="true">May 7<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Apple describe <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html">NSUserDefaults</a> as &#8220;a programmatic interface for interacting with the defaults system&#8221;.</p>

<p>It also provides a convenient store for persisting and retrieving user preferences for your application. You can think of it as a <code>key</code> <code>value</code> hash like structure, although it is a bit smarter than that.</p>

<p>Here&#8217;s a really simple implementation I&#8217;ve been using:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Cache
</span><span class='line'>
</span><span class='line'>  class &lt;&lt; self
</span><span class='line'>
</span><span class='line'>    def set_default(key, data)
</span><span class='line'>      return if read(key)
</span><span class='line'>      write(key, data)
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    def write(key, data)
</span><span class='line'>      NSUserDefaults.standardUserDefaults[storage_key(key)] = data
</span><span class='line'>      NSUserDefaults.standardUserDefaults.synchronize
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    def read(key)
</span><span class='line'>      NSUserDefaults.standardUserDefaults[storage_key(key)]
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    private
</span><span class='line'>
</span><span class='line'>    def storage_key_prefix
</span><span class='line'>      "#{cache_namespace}_"
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    def storage_key key
</span><span class='line'>      "#{storage_key_prefix}#{key}"
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    def cache_namespace
</span><span class='line'>      raise NotImplementedError
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class UserSearchSettings &lt; Cache
</span><span class='line'>
</span><span class='line'>  class &lt;&lt; self
</span><span class='line'>
</span><span class='line'>    private
</span><span class='line'>
</span><span class='line'>    def cache_namespace
</span><span class='line'>      "user_search"
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure>


<p>I use it like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>UserSearchSettings.write("sort_by", "name")
</span><span class='line'>=&gt; true
</span><span class='line'>NSUserDefaults.standardUserDefaults.dictionaryRepresentation
</span><span class='line'>=&gt; {"user_search_sort_by" =&gt; "name"} # note there will be a lot of other key values in the hash
</span><span class='line'>UserSearchSettings.read("sort_by")
</span><span class='line'>=&gt; "name"</span></code></pre></td></tr></table></div></figure>


<p>My intention is not to call the <code>Cache</code> class directly and to only use the subclass <code>UserSearchSettings</code>. This forces me to group settings with a prefix defined by the <code>cache_namespace</code> method. This will help avoid accidentally defining the same key name for different values. It also nicely groups related settings.</p>

<p>Each application has its&#8217; own <code>NSUserDefaults.standardUserDefaults</code> so there is no need to prefix the keys with the application name.</p>

<p>This store will persist until the user removes your application from their device.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/20/using-magicalrecord-and-core-data-in-rubymotion/">Using MagicalRecord and Core Data in RubyMotion</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-20T13:36:00+00:00" pubdate data-updated="true">Feb 20<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/magicalpanda/MagicalRecord">MagicalRecord</a> is a wrapper around Apple&#8217;s <a href="http://en.wikipedia.org/wiki/Core_Data">Core Data Framework</a>. Written in Objective-C,
it&#8217;s one of the most popular and mature libraries for working with Core Data.</p>

<p>I really like it as it simplifies a lot of the code, whilst
it still allows you to &#8216;get your hands dirty&#8217; when necessary.</p>

<p>This article details how I&#8217;m using it. This is by no means the &#8216;perfect&#8217; solution,
as I am evolving it all the time, but it is working well for me. By all means
get in touch if you think I&#8217;m missing any obvious tricks.</p>

<p>One thing I have found is that it&#8217;s pretty much impossible to hide the fact you
are using CoreData. Particularly with the requirement of a different context for each
thread. But what I do want to do is make things as simple, consistent and maintainable
as possible.</p>

<h2>Installation</h2>

<p>At the time of writing I&#8217;m using the <a href="https://github.com/magicalpanda/MagicalRecord/tree/release/3.0">MagicalRecord 3.0 branch</a>,
installed via <a href="https://github.com/HipByte/motion-cocoapods">motion-cocoaopds</a>. My <code>Rakefile</code> includes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>app.pods do
</span><span class='line'>  pod 'MagicalRecord', :git =&gt; 'https://github.com/magicalpanda/MagicalRecord.git', :branch =&gt;'release/3.0'
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<h2>Wrapping MagicalRecord</h2>

<p>First I have a <code>Database</code> class to wrap common MagicalRecord tasks.</p>

<p>The main reason for this class is so that I do not sprinkle MagicalRecord calls
all around my code. Having them all in one place will make it easy to update if/when
the MagicalRecord api changes. It also encourages consistency in my usage of MagicalRecord
as, for example, there are many ways to persist your data.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Database
</span><span class='line'>
</span><span class='line'>  def self.filename
</span><span class='line'>    "YourApplicationName.sqlite"
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.path
</span><span class='line'>    File.join(
</span><span class='line'>      NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, true),
</span><span class='line'>      "YourApplicationName",
</span><span class='line'>      self.filename
</span><span class='line'>    )
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.created?
</span><span class='line'>    File.exist?(self.path)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.loadOrCreate
</span><span class='line'>    MagicalRecord.setupAutoMigratingStack
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.createTestDB
</span><span class='line'>    MagicalRecord.setupStackWithInMemoryStore
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.delete
</span><span class='line'>    if self.created?
</span><span class='line'>      self.cleanUp
</span><span class='line'>      File.delete(self.path)
</span><span class='line'>    end
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.reset
</span><span class='line'>    Database.delete
</span><span class='line'>    Database.loadOrCreate
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.cleanUp
</span><span class='line'>    MagicalRecord.cleanUp
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.defaultLocalContext
</span><span class='line'>    MagicalRecordStack.defaultStack.context
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.backgroundLocalContext
</span><span class='line'>    NSManagedObjectContext.MR_confinementContextWithParent(defaultLocalContext)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.save_specific_context(localContext, callback = nil)
</span><span class='line'>    localContext.MR_saveToPersistentStoreWithCompletion(
</span><span class='line'>      lambda { |success, error|
</span><span class='line'>        NSLog("success: %@", success)
</span><span class='line'>        if success
</span><span class='line'>          callback.call if callback
</span><span class='line'>        else
</span><span class='line'>          NSLog "Error saving Seed Data"
</span><span class='line'>          NSLog("description: %@", error.description)
</span><span class='line'>        end
</span><span class='line'>      }
</span><span class='line'>    )
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.save_test_db!
</span><span class='line'>    defaultLocalContext.MR_saveToPersistentStoreAndWait
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.save_on_main_thread!(callback = nil)
</span><span class='line'>    defaultLocalContext.MR_saveToPersistentStoreWithCompletion(
</span><span class='line'>      lambda { |success, error|
</span><span class='line'>        NSLog("success: %@", success)
</span><span class='line'>        if success
</span><span class='line'>          callback.call(defaultLocalContext) if callback
</span><span class='line'>        else
</span><span class='line'>          NSLog "Error saving Core Data"
</span><span class='line'>          NSLog("description: %@", error.description)
</span><span class='line'>        end
</span><span class='line'>      }
</span><span class='line'>    )
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.save_on_background_thread!(callback = nil, completion_callback = nil)
</span><span class='line'>    MagicalRecord.saveWithBlock(
</span><span class='line'>      lambda { |localContext|
</span><span class='line'>        callback.call(localContext) if callback
</span><span class='line'>      },
</span><span class='line'>      completion: lambda { |success, error|
</span><span class='line'>        NSLog("success: %@", success)
</span><span class='line'>        if success
</span><span class='line'>          completion_callback.call if completion_callback
</span><span class='line'>        else
</span><span class='line'>          NSLog "Error saving Core Data"
</span><span class='line'>          NSLog("description: %@", error.description)
</span><span class='line'>        end
</span><span class='line'>      }
</span><span class='line'>    )
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>In <code>AppDelegate</code> <code>didFinishLaunchingWithOptions</code> I call <code>Database.loadOrCreate</code>. As the name implies, this
will either load my existing Core Data stack or it will set up a new one.</p>

<p>I also cleanup the database when my app closes via this method in the <code>AppDelegate</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  def applicationWillTerminate application
</span><span class='line'>    Database.cleanUp
</span><span class='line'>  end</span></code></pre></td></tr></table></div></figure>


<h2>Entities</h2>

<p><del>I create my Core Data entities in Xcode (although I do intend to look at the <a href="https://github.com/infinitered/ruby-xcdm">ruby-xcdm gem</a> so I can stop using Xcode).</del> I&#8217;m now using the <a href="https://github.com/infinitered/ruby-xcdm">ruby-xcdm</a> gem to define my schema in code. Here&#8217;s a <a href="http://paulsturgess.co.uk/blog/2015/05/12/core-data-in-rubymotion-defining-your-schema-in-code/">blog post about it</a>.</p>

<p>For now, the <a href="https://github.com/yury/ib">ib gem</a> is great for allowing us to fire up Xcode just when we need it.
The gem is mostly geared around using Interface Builder but I don&#8217;t use it for that.</p>

<p>Once you&#8217;ve installed the gem run:</p>

<pre><code>$ rake ib:open
</code></pre>

<p>This will open Xcode. Inside the Resources folder on the left hand side there
will be a <code>.xcdatamodeld</code> file. Select this and you can create your entities.</p>

<p>One thing to remember is to set the <code>Class</code> of each Entity to the corresponding <code>Class</code>
in your app. Otherwise it will be a standard <code>NSManagedObject</code>.</p>

<p>So for each Entiy I create a corresponding class like so. Note it inherits from my
own <code>CustomNSManagedObject</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class ToDoItem &lt; CustomNSManagedObject
</span><span class='line'>  # more methods go here
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>I give each Entity <code>created_at</code> and <code>id</code> attributes in order to help with querying.</p>

<h2>ActiveRecord Style Behaviour</h2>

<p>The subclass of NSManagedObject I use looks like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class CustomNSManagedObject &lt; NSManagedObject
</span><span class='line'>
</span><span class='line'>  def self.defaultContext
</span><span class='line'>    CurrentSaveGame.localContext
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.all(context = nil)
</span><span class='line'>    localContext = context || defaultContext
</span><span class='line'>    self.MR_findAllSortedBy("created_at", ascending:true, inContext: localContext)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.first(context = nil)
</span><span class='line'>    localContext = context || defaultContext
</span><span class='line'>    self.MR_findFirstOrderedByAttribute("created_at", ascending:true, inContext: localContext)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.last(context = nil)
</span><span class='line'>    localContext = context || defaultContext
</span><span class='line'>    self.MR_findFirstOrderedByAttribute("created_at", ascending:false, inContext: localContext)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.count
</span><span class='line'>    self.MR_numberOfEntities
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.find(id, context = nil)
</span><span class='line'>    localContext = context || defaultContext
</span><span class='line'>    self.MR_findFirstByAttribute("id", withValue:id, inContext: localContext)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.new(attributes)
</span><span class='line'>    self.build(attributes)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.build(attributes = {}, context = nil)
</span><span class='line'>    localContext = context || defaultContext
</span><span class='line'>    model = self.MR_createInContext(localContext)
</span><span class='line'>    model.setValuesForKeysWithDictionary(attributes)
</span><span class='line'>    model.created_at = Time.now
</span><span class='line'>    model
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def switch_context(localContext)
</span><span class='line'>    self.MR_inContext(localContext)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def attributes
</span><span class='line'>    self.entity.attributesByName.keys.each_with_object({}) do |attribute, attributes_hash|
</span><span class='line'>      attributes_hash[attribute] = self.send(attribute)
</span><span class='line'>    end
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Essentially this class gives me ActiveRecord like behaviour. Also, like my <code>Database</code> class,
it ensures I contain some more <code>MagicalRecord</code> calls to a single place.</p>

<p>This means I can do:</p>

<pre><code>ToDoItem.build(
  {
    id: 1,
    action: "Lorem ipsum dolor sit amet"
  }
)
</code></pre>

<p>My build method automatically inserts a <code>created_at</code> for every new record.</p>

<h2>Data store</h2>

<p>By default <code>MagicalRecord.setupAutoMigratingCoreDataStack</code> will use SQLite to
persist your data.</p>

<p>Note that I don&#8217;t include a <code>save</code> method in <code>CustomNSManagedObject</code>. Saving an individual
record isn&#8217;t the most efficient way to persist changes in Core Data. Everything is held
in memory until the relevant context is told to save. Hence why I&#8217;ve put the
<code>save</code> method in the <code>Database</code> class.</p>

<h2>Persisting data on the main thread</h2>

<p>If you&#8217;ve used any of the CustomNSManagedObject methods like <code>find</code>, <code>all</code>, or <code>build</code>
without passing in a context then using <code>Database.save_on_main_thread!</code> will persist any
changes made. For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new_item = ToDoItem.build(
</span><span class='line'>  {
</span><span class='line'>    id: 2
</span><span class='line'>    action: "Some other todo item"
</span><span class='line'>  }
</span><span class='line'>)
</span><span class='line'>Database.save_on_main_thread!</span></code></pre></td></tr></table></div></figure>


<h2>Persisting data on background threads</h2>

<p>However, if updates are made on a background thread, then we need a new (temporary)
context which is handled by <code>Database.save_on_background_thread!</code>.</p>

<p>For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Database.save_on_background_thread!(
</span><span class='line'>  lambda { |localContext|
</span><span class='line'>    new_item = ToDoItem.build(
</span><span class='line'>      {
</span><span class='line'>        id: 2
</span><span class='line'>        action: "Some other todo item"
</span><span class='line'>      },
</span><span class='line'>      localContext
</span><span class='line'>    )
</span><span class='line'>  }
</span><span class='line'>)</span></code></pre></td></tr></table></div></figure>


<p>Alternatively if you don&#8217;t want to wrap everything in the block. Create a
<code>localContext</code> and hold on to it. Make your changes and then save later down the line.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>localContext = Database.backgroundLocalContext
</span><span class='line'>new_item = ToDoItem.build(
</span><span class='line'>  {
</span><span class='line'>    id: 2
</span><span class='line'>    action: "Some other todo item"
</span><span class='line'>  },
</span><span class='line'>  localContext
</span><span class='line'>)
</span><span class='line'>Database.save_specific_context(localContext)</span></code></pre></td></tr></table></div></figure>


<p>Note most of the class methods in <code>CustomNSManagedObject</code> take an optional context so they
can be used on background threads.</p>

<h2>Testing</h2>

<p>For tests I use the in memory data store and when saving it is synchronous. This ensures the data is there before the assertions!</p>

<p>For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>describe "SomeTest" do
</span><span class='line'>
</span><span class='line'>  before do
</span><span class='line'>    Database.cleanUp
</span><span class='line'>    Database.createTestDB
</span><span class='line'>    @localContext = Database.defaultLocalContext
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  describe "some_method" do
</span><span class='line'>
</span><span class='line'>    context "when some scenario" do
</span><span class='line'>
</span><span class='line'>      it "should assign something is true" do
</span><span class='line'>        # ...
</span><span class='line'>      end
</span><span class='line'>
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/29/logging-to-the-console-in-rubymotion/">Logging to the Console in RubyMotion</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-29T08:44:00+00:00" pubdate data-updated="true">Oct 29<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The simplest way to output to the console from your RubyMotion app is to use
<code>puts</code>. This works fine when your app is running in the simulator. However,
<code>puts</code> does not output to the console when your app is running on the device
itself.</p>

<p>You can view the live logs while your app is running on your usb connected device via:</p>

<pre><code>$ motion device:console
</code></pre>

<p>You will see messages from your application alongside those from other apps or
the system itself.</p>

<p>Instead of using <code>puts</code>, you&#8217;ll need to make use of <code>NSLog</code>. For example</p>

<pre><code>NSLog("My debug messge")
</code></pre>

<p>Note, however, that the first argument for <code>NSLog</code> is actually a <a href="https://developer.apple.com/library/ios/documentation/cocoa/conceptual/Strings/Articles/formatSpecifiers.html">String Format Specifier</a>.</p>

<p>The following are equivalent:</p>

<pre><code>puts "A #{variable} goes here"
NSLog("A %@ goes here", variable)
</code></pre>

<p>Just remember that any <code>NSLog</code> messages you leave in your app will be visible
to the curious, even after you&#8217;ve released to the App Store.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/01/09/ruby-metaprogramming-define-method-and-instance-exec/">Ruby metaprogramming: define_method and instance_exec</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/04/29/using-enzyme-to-test-a-react-component-onclick-with-event-preventdefault/">Using Enzyme to test a React component onClick with event preventDefault</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/08/making-and-testing-ajax-requests-with-axios-in-a-redux-app/">Making and testing Ajax requests with Axios in a Redux app</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/01/using-capybara-and-phantomjs-to-test-an-external-website/">Using Capybara and PhantomJS to test an external website</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/11/simple-method-for-checking-the-mime-type-for-a-file-in-ruby-on-rails/">Simple method for checking a file mime type in Ruby on Rails</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/paulsturgess">@paulsturgess</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'paulsturgess',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Paul Sturgess -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
