
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>A blog about iOS dev with RubyMotion</title>
  <meta name="author" content="Paul Sturgess">

  
  <meta name="description" content="Whilst RubyMotion is new, and the number of RubyMotion specific libraries
is growing fast, there are already loads of native Objective-C libraries &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://paulsturgess.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="A blog about iOS dev with RubyMotion" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-75197-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">A blog about iOS dev with RubyMotion</a></h1>
  
    <h2>Paul Sturgess</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Index</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="https://twitter.com/paulsturgess">@paulsturgess</a></li>
  <li><a href="https://github.com/paulsturgess">Github</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/15/using-native-objective-c-cocoapod-libraries-in-rubymotion/">Using Native Objective-C Cocoapod Libraries in RubyMotion</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-15T13:40:00+01:00" pubdate data-updated="true">May 15<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Whilst RubyMotion is new, and the number of <a href="http://rubymotion-wrappers.com/">RubyMotion specific libraries</a>
is growing fast, there are already loads of native Objective-C libraries out there.</p>

<p>These instructions show you how to use <a href="http://cocoapods.org">Cocoapods</a> in
combination with <a href="http://gembundler.com">Bundler</a>.</p>

<p>Cocoapods is a dependency manager, like <a href="http://rubygems.org">RubyGems</a>, but for
Objective-C projects.</p>

<p>In this example, I&#8217;ve chosen to install <a href="https://github.com/Inferis/ViewDeck">ViewDeck</a>. ViewDeck
makes it easy to implement the sliding panel user interface made popular by the
Facebook iOS app.</p>

<p>The <a href="http://cocoapods.org">CocoaPods website</a> is a great place to search for
available &#8216;Pods&#8217;.</p>

<h2>Summary of steps</h2>

<ul>
<li>Include the motion-cocoapods gem</li>
<li>Setup Cocoapods</li>
<li>Add ViewDeck to your application Rakefile</li>
</ul>


<h2>Bundler</h2>

<p>If you haven&#8217;t got Bundler setup, I&#8217;ve written some
<a href="http://paulsturgess.co.uk/blog/2013/05/13/setting-up-bundler-and-rvm-for-a-rubymotion-app/">instructions for using Bundler with RubyMotion</a>.</p>

<h2>Cocoapods</h2>

<p>Add cocoapods to your Gemfile:</p>

<pre><code>gem 'motion-cocoapods'
</code></pre>

<p>Install the gem via bundler:</p>

<pre><code>$ bundle
</code></pre>

<p>Setup Cocoapods via:</p>

<pre><code>$ pod setup
</code></pre>

<h2>Add ViewDeck to your Rakefile</h2>

<p>In your Rakefile you need to add the ViewDeck pod and QuartzCore Framework
(required by ViewDeck):</p>

<pre><code>Motion::Project::App.setup do |app|
  # Frameworks
  app.frameworks += [
    'QuartzCore'
  ]

  # Cocoapods
  app.pods do
    pod 'ViewDeck'
  end
end
</code></pre>

<p>ViewDeck will be automatically downloaded, built and linked the next time your build your app.</p>

<h2>Using ViewDeck</h2>

<p>I&#8217;ve ported the Objective-C example ViewDeck application over to RubyMotion.</p>

<p><a href="https://github.com/paulsturgess/ViewDeckExample-RubyMotion">Feel free to check it out</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/13/setting-up-bundler-and-rvm-for-a-rubymotion-app/">Setting Up Bundler and RVM for a RubyMotion App</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-13T10:00:00+01:00" pubdate data-updated="true">May 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Create your rvmrc file via:</p>

<pre><code>$ rvm use 1.9.3@yourgemsetname --create --rvmrc
</code></pre>

<p>Add bundler to your <code>Rakefile</code></p>

<pre><code>require 'bundler'
Bundler.require
</code></pre>

<p>Create your <code>Gemfile</code> via:</p>

<pre><code>$ bundle init
</code></pre>

<p>Update your <code>Gemfile</code></p>

<pre><code>source "https://rubygems.org"
gem "bubble-wrap"
</code></pre>

<p>Install gems</p>

<pre><code>$ bundle
</code></pre>

<p>You&#8217;re done.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/10/using-rubymotion-to-provision-an-app-onto-your-iphone/">Using RubyMotion to Provision an App Onto Your iPhone</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-10T21:49:00+01:00" pubdate data-updated="true">May 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So you&#8217;ve got your <a href="https://developer.apple.com/">Apple developer account</a> and
now you want to get your RubyMotion app onto your iPhone.</p>

<p>At the end of these instructions you will be able to deploy multiple apps using
the same provisioning profile. Ideal for prototyping.</p>

<h2>Summary of what you need to do</h2>

<ul>
<li>Generate an iOS certificate</li>
<li>Create an App ID</li>
<li>Register your iPhone with your Apple Developer account</li>
<li>Create a Provisioning Profile</li>
<li>Update your RubyMotion Rakefile to use the Certificate and the Provisioning Profile</li>
</ul>


<h2>Generate an iOS certificate</h2>

<p>Open the Keychain Access program on your Mac and from the dropdown menu choose:</p>

<p><code>Keychain Access &gt; Certificate Assistant &gt; Request a certificate from a certificate authority</code></p>

<p>For the common name I went for <code>iOS development certificate</code>. But you can
choose whatever you like.</p>

<p>Just make sure you select to <code>save to disk</code>.</p>

<p>Now you need to sync this up with your Apple Developer account.</p>

<p>Visit <a href="https://developer.apple.com">The Apple iOS Dev Centre</a> and go to the
<code>Certificates, Identities &amp; Profiles</code> section.</p>

<p>Go to <code>Certificates &gt; Development</code> and select to add a new certificate. Follow
the step process, uploading the certificate you just created.</p>

<p>At the end you need to download the <code>.cer</code> file that gets generated. Double
click it to add to your Keychain.</p>

<h2>Create an App ID</h2>

<p>In that same section of the website you can create an App ID by going to
<code>Identifiers &gt; App ID's</code>.</p>

<p>I chose a name of <code>exampleapp</code> and opted for the Wildcard App ID. The wildcard
ID means I don&#8217;t need to create a new App ID &amp; Profile for each new app I want
to try out on my iPhone.</p>

<p>Obviously when it comes to App Store submission, then it will make sense to have
a dedicated App ID. Also Apple recommend a dedicated App ID if you&#8217;re testing
advanced features like Push Notifications.</p>

<h2>Register your iPhone with your Apple Developer account</h2>

<p>Again staying on the iOS Dev Center website, you need to register all the
devices you want to deploy your app onto.</p>

<p>You only need to do this once for each device, but you&#8217;ll need to know the UDID
for each one.</p>

<p>I decided to install a handy free app (simply called UDID) that emails you this
reference and a host of other info straight from your iPhone. There are loads
of free apps that do similar things on the App Store.</p>

<h2>Create a Provisioning Profile</h2>

<p>The last task on the iOS Dev Center website is to create a
<code>Development Provisioning Profile</code>.</p>

<p>All the instructions are self-explanatory so I won&#8217;t repeat them here.</p>

<p>Just make sure you download the <code>.mobileprovision</code> file at the end.</p>

<h2>Update your RubyMotion Rakefile to use the Certificate &amp; Provisioning Profile</h2>

<p>Update your <code>Rakefile</code> in your app:</p>

<pre><code>Motion::Project::App.setup do |app|
  app.name = 'ExampleApp'
  app.identifier = 'com.yourdomain.exampleapp'
  app.codesign_certificate = 'iPhone Developer: Your Name (XXXXXXXXXX)'
  app.provisioning_profile = '/path/to/your/provisioning/profile/Example_App.mobileprovision'
end
</code></pre>

<p>Note that Wildcard App Id means you can use any name for the third part of the
identifier.</p>

<p>Also for the <code>codesign_certificate</code>, you can view this in the Keychain Access
program.</p>

<p>Finally deploy to the device via:</p>

<pre><code>$ rake device
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/25/objective-c-for-a-rubyist/">Objective-C for a Rubyist</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-25T21:04:00+01:00" pubdate data-updated="true">Apr 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.rubymotion.com/">RubyMotion</a> does a great job of allowing iOS apps to be written in Ruby. However,
whilst I want to avoid writing Objective-C, I do want to learn how to read it.</p>

<ul>
<li>It&#8217;ll make it easier to learn Apple&#8217;s SDK</li>
<li>I want to be able to read existing iOS books/articles/stackoverflow solutions</li>
<li>It just seems like a good idea</li>
</ul>


<p>Fortunately both languages stem from Smalltalk, so they&#8217;re not a million miles
apart.</p>

<h2>Instance variables</h2>

<pre><code>- (void)instanceVariable;
</code></pre>

<ul>
<li><code>-</code> means instance.</li>
<li>next is the return type: <code>void</code> which means it returns nothing.</li>
<li>Finally we have the method name, in this case <code>instanceVariable</code>.</li>
</ul>


<p>Everything in Objective-C is camelCase. The common idiom in
 RubyMotion is to write Ruby in camel case where you are implementing
 classes that use Apple&#8217;s Objective-C methods. Reverting back to snake_case when
 the class is pure Ruby.</p>

<h2>Class methods</h2>

<pre><code>+ (User *)userWithName:(NSString *)name;
</code></pre>

<ul>
<li><code>+</code> means class method</li>
<li>next is the return type. In this case a <code>User</code> pointer.</li>
<li>next is the method name: <code>userWithName</code></li>
<li>next is a colon <code>:</code>, which means there is an argument.</li>
<li>next, in brackets, is the argument type. A pointer to an <code>NSString</code> instance.</li>
<li>Finally the argument variable <code>name</code></li>
</ul>


<p>So just be clear, in Ruby this is:</p>

<pre><code>def self.userWithName(name)
    #...
end
</code></pre>

<h2>Sending messages</h2>

<p>As with all Smalltalk based languages, you are essentially creating methods in
classes to send messages around. I believe Objective-C does have a dot notation,
like Ruby, but most code examples I&#8217;ve come across use spaces and lots of square
brackets.</p>

<p>For example in Objective-C sending the <code>logOut</code> message to a <code>user</code> object is:</p>

<pre><code>[user logOut];
</code></pre>

<p>The Ruby equivalent:</p>

<pre><code>user.logOut
</code></pre>

<p>To chain methods in Objective-C it looks like:</p>

<pre><code>NSMutableArray *myArray = [NSMutableArray alloc] init];
</code></pre>

<p>This is equivalent to the Ruby:</p>

<pre><code>myArray = NSMutableArray.alloc.init
</code></pre>

<h2>reallyLongMethod:WithNamedParameters:</h2>

<p>In Objective-C named parameters are heavily used. This is great for clarity, as
they are intended to be as descriptive as possible. Removing the ambiguity is
really good, but it is important to know that named parameters are actually
included in the method name.</p>

<p>So an example Apple SDK method is <code>tableView:numberOfRowsInSection:</code>. Where the
colons indicate an argument is required. So in this case, two. In Objective-C it
looks like:</p>

<pre><code>- (Integer) tableView(tableView, numberOfRowsInSection:section)
</code></pre>

<p>RubyMotion currently runs on Ruby 1.9.3, so named arguments have been added
especially. The above method looks like the following in RubyMotion:</p>

<pre><code>def tableView(tableView, numberOfRowsInSection: section)
  # ...
end
</code></pre>

<p>This can look a bit strange at times when the Apple SDK requires you to implement
methods that start with the same name, but take different arguments. If you are
not aware that the named named arguments are used in the method name, it actually
looks like you&#8217;re implementing the same method multiple times.</p>

<p>For example, another Apple SDK method <code>tableView:editingStyleForRowAtIndexPath:</code> looks very similar in RubyMotion:</p>

<pre><code>def tableView(tableView, editingStyleForRowAtIndexPath: indexPath)
  # ...
end
</code></pre>

<h2>In summary</h2>

<p>Objective-C is definitely more verbose, but I really like the RubyMotion
implementation. There&#8217;s loads more to get my head around, but this is a good
starting point.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/24/hello-octopress-and-github-pages/">Hello Octopress & Github Pages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-24T19:51:00+01:00" pubdate data-updated="true">Apr 24<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://octopress.org/">Octopress</a> is a static blog generator. It uses
<a href="https://github.com/mojombo/jekyll">Jekyll</a> which was created by Github to run
<a href="http://pages.github.com">Github Pages</a> and now I&#8217;m using it to power my
re-launched blog.</p>

<p>I&#8217;m attracted by the prospect of using Octopress because it&#8217;s dead simple. It
generates the blog content as flat pages so it&#8217;s super fast. It allows me to
write using <a href="http://daringfireball.net/projects/markdown/">Markdown</a> and deploy
via <a href="http://git-scm.com/">Git</a>.</p>

<p>There&#8217;s no server setup and no hosting fees, as it&#8217;s hosted using Github
Pages. Also it&#8217;s written in Ruby, so it works with all the tools I&#8217;m familiar with.</p>

<p>What follows is more for my reference than anything, so I can remember how I set
things up.</p>

<h2>Initial setup</h2>

<p>Create a new Github repo named <code>yourgithubusername.github.io</code>.</p>

<p>The name is important here as Github Pages will automatically find this repo and
serve up the content it finds in the <code>master</code> branch as your website at
<code>http://yourgithubusername.github.io</code>.</p>

<p>Grab Octopress and change directory:</p>

<pre><code>$ git clone git://github.com/imathis/octopress.git yourgithubusername.github.io
$ cd yourgithubusername.github.io
</code></pre>

<p>Octopress has its&#8217; own rvmrc file, but I like to use gemsets, so I created my own
before installing bundler and the required gems:</p>

<pre><code>$ rvm use 1.9.3@yourgemsetname --create --rvmrc
$ gem install bundler
$ bundle install
</code></pre>

<p>Install the default theme:</p>

<pre><code>$ rake install
</code></pre>

<p>Octopress has a configuration rake task that automatically sets the repo up for
easy deployment to Github Pages:</p>

<pre><code>$ rake setup_github_pages
</code></pre>

<p>This task does quite a few things. The most important is that it creates a new
<code>_deploy</code> directory that is another git repository. This is where Octopress
generates the flat website for deployment to the <code>master</code> branch of your repo
on Github.</p>

<p>All the Octopress code used to generate the website into the <code>_deploy</code> directory
now lives in new branch called <code>source</code>. Note in the <code>source</code> branch the
<code>.gitignore</code> includes <code>_deploy</code> so it doesn&#8217;t get committed in two places!</p>

<p>This sounds more complicated than it is, Octopress has rake tasks to make this
really easy to manage. It&#8217;s worth pushing up at this point to check everything
works before tinkering:</p>

<pre><code>$ rake generate
$ rake deploy
</code></pre>

<p>This copies the generated files into <code>_deploy</code>, adds them to git, commits and
pushes them up to the <code>master</code> branch.</p>

<p>Visit <code>http://yourgithubusername.github.io</code></p>

<p>Note at this point only the website has been committed, the source needs to be
comitted separately via:</p>

<pre><code>$ git add .
$ git commit -m 'Initial source commit'
$ git push origin source
</code></pre>

<h2>Running Octopress locally</h2>

<p>Octopress works really well with <a href="http://pow.cx">POW server</a>.</p>

<pre><code>$ cd ~/.pow
$ ln -s /path/to/your/octopress/site yoursitename
</code></pre>

<p>Now that youâ€™re setup with POW, in the root of your <code>source</code> branch run:</p>

<pre><code>$ rake watch
</code></pre>

<p>Load up <code>http://yoursitename.dev</code></p>

<h2>Theme customisation</h2>

<p>I&#8217;m using the <a href="https://github.com/lucaslew/whitespace">&#8216;Whitespace&#8217; theme</a> by lucaslew.
 <a href="https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes">Other themes are available</a>.</p>

<p>I&#8217;ve tweaked the header to remove the search and include navigation links to my Twitter and Github accounts.</p>

<p>I installed the theme by running the following in the root of the <code>source</code> branch.
 Say yes when it asks you to overwrite existing files.</p>

<pre><code>$ git clone git://github.com/lucaslew/whitespace.git .themes/whitespace
$ rake install['whitespace']
$ rake generate
</code></pre>

<h2>_config.yml</h2>

<p>This is where the main site configuration lives. Things like the blog title and various 3rd Party Settings, your Twitter and Github handles etc.</p>

<p>Changes to <code>_config.yml</code> will require you to restart the <code>rake watch</code> task if
you&#8217;re using POW server.</p>

<h2>Creating this post</h2>

<p>As easy as:</p>

<pre><code>rake new_post["Hello Octopress and Github pages"]
</code></pre>

<h2>Deploying to Github Pages</h2>

<pre><code>$ rake generate
$ rake deploy
</code></pre>

<p>Just rememeber to manually commit changes made in the <code>source</code> branch.</p>

<h2>Custom domain</h2>

<p>Github have full details on how to do this in their <a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">GitHub Pages Documentation</a>.</p>

<p>Inside your <code>source</code> branch run the following:</p>

<pre><code>echo 'your-domain.com' &gt;&gt; source/CNAME
</code></pre>

<p>Regenerate your site and deploy up to Github. In your DNS settings point an
<code>A record</code> (for your naked domain) to <code>204.232.175.78</code>.</p>

<p>For <code>www</code> just point a <code>CNAME record</code> to yourgithubusername.github.io</p>

<h2>Working from another machine</h2>

<p>As the <code>_deploy</code> directory is in the <code>.gitignore</code>, the easiest thing is to clone
the <code>source</code> branch and then setup the <code>_deploy</code> branch manually.</p>

<pre><code>$ git clone -b source git@github.com:username/username.github.io.git username.github.io
$ cd username.github.io
$ bundle install
$ mkdir _deploy
$ cd _deploy
$ git init
$ git remote add origin git@github.com:username/username.github.io.git
$ git pull origin master
$ cd ..
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/15/using-native-objective-c-cocoapod-libraries-in-rubymotion/">Using native Objective-C Cocoapod libraries in RubyMotion</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/13/setting-up-bundler-and-rvm-for-a-rubymotion-app/">Setting up Bundler and RVM for a RubyMotion app</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/10/using-rubymotion-to-provision-an-app-onto-your-iphone/">Using RubyMotion to provision an app onto your iPhone</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/25/objective-c-for-a-rubyist/">Objective-C for a Rubyist</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/24/hello-octopress-and-github-pages/">Hello Octopress & Github pages</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/paulsturgess">@paulsturgess</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'paulsturgess',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Paul Sturgess -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
